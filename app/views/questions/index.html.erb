<h2 class="jimbo_header"><%= @category.name %>: </h2>

<div class="answers">
  <%= render partial: 'shared/question', collection: @questions, :locals => {start_language: @start_language, end_language: @end_language } %>
</div>

<script>
  $(document).ready(function(){
    var questions = $('.question_index');
    var question_id_array = [];
    var players = {};

    for (var i=0;i<questions.length;i++) {
      question_link = $(questions[i]).find('a').attr('href');
      question_id   = question_link.match(/\d+/).join("");
      question_id_array.push(question_id);
    };

    question_id_array.forEach(function(questionId) {
      $.get('get_answer/', {question_id: questionId}, function(response) {
            players[questionId]  = new Player({
                play_sel: "#Play_Question_"+questionId,
                view_sel: "#Preview_Question_"+questionId
            });

            players[questionId].play(response);
      });
    });

  });
</script>